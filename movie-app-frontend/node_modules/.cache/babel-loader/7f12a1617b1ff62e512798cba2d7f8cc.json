{"ast":null,"code":"import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_USER_ERRORS } from \"./actionTypes\";\nimport axios from \"axios\";\n\nconst setUserToken = token => {\n  return {\n    type: SET_USER_TOKEN,\n    token\n  };\n};\n\nconst setUserRetrieveToken = token => {\n  return {\n    type: SET_USER_RETRIEVE_TOKEN,\n    token\n  };\n};\n\nconst deleteUserToken = () => {\n  return {\n    type: DELETE_USER_TOKEN\n  };\n};\n\nconst setProfile = user => {\n  return {\n    type: SET_PROFILE,\n    payload: user\n  };\n};\n\nconst setUserErrors = errors => {\n  return {\n    type: SET_USER_ERRORS,\n    payload: errors\n  };\n};\n\nconst storeUserToken = function (user) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'login';\n  console.log(\"store user token : \", user);\n  return dispatch => {\n    axios.post(`http://localhost:3040/users/${type}`, user).then(token => {\n      if (type === 'login') {\n        localStorage.setItem(\"usersToken\", token.data.accessToken);\n        dispatch(setUserToken(token.data.accessToken));\n      }\n    }).catch(err => {\n      if (err.response.status === 400) {\n        dispatch(setUserErrors(err.response.data));\n        console.log(\"error occured : \", err.response.data, err.response.status);\n      }\n    });\n  };\n};\n\nconst retrieveUserToken = () => {\n  return (dispatch, getState) => {\n    const token = getState().userTokener.userToken;\n    console.log(\"retrive user token : \", token);\n\n    if (token) {\n      dispatch(setUserRetrieveToken(token));\n    }\n  };\n};\n\nconst viewProfile = userId => {\n  return dispatch => {\n    axios.get(`http://localhost:3040/users/my-profile/${userId}`).then(user => {\n      dispatch(setProfile(user.data.user));\n    }).catch(err => console.log(err));\n  };\n};\n\nconst updateProfile = (userDetails, userId) => {\n  console.log(\"user details : \", userDetails);\n  console.log(\"id : \", userId);\n  return dispatch => {\n    axios.put(`http://localhost:3040/users/${userId}`, userDetails).then(() => {\n      dispatch(setProfile(userDetails));\n    }).catch(err => console.log(\"error : \", err));\n  };\n};\n\nexport { storeUserToken, retrieveUserToken, deleteUserToken, viewProfile, updateProfile };","map":{"version":3,"names":["SET_USER_TOKEN","SET_USER_RETRIEVE_TOKEN","DELETE_USER_TOKEN","SET_PROFILE","SET_USER_ERRORS","axios","setUserToken","token","type","setUserRetrieveToken","deleteUserToken","setProfile","user","payload","setUserErrors","errors","storeUserToken","console","log","dispatch","post","then","localStorage","setItem","data","accessToken","catch","err","response","status","retrieveUserToken","getState","userTokener","userToken","viewProfile","userId","get","updateProfile","userDetails","put"],"sources":["/home/asplap2005/Documents/React-Project/movie-app-frontend/src/components/redux/UserActions.js"],"sourcesContent":["import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_USER_ERRORS } from \"./actionTypes\"\nimport axios from \"axios\"\n\nconst setUserToken = (token) => {\n    return {\n        type : SET_USER_TOKEN,\n        token\n    }\n}\nconst setUserRetrieveToken = (token) => {\n    return {\n        type : SET_USER_RETRIEVE_TOKEN,\n        token\n    }\n}\nconst deleteUserToken = () => {\n    return {\n        type : DELETE_USER_TOKEN\n    }\n}\nconst setProfile = (user) => {\n    return {\n        type : SET_PROFILE,\n        payload : user\n    }\n}\nconst setUserErrors = (errors) => {\n    return {\n        type : SET_USER_ERRORS,\n        payload : errors\n    }\n}\nconst storeUserToken = (user, type = 'login') => {\n    console.log(\"store user token : \",user)\n    return(dispatch) => {\n        axios.post(`http://localhost:3040/users/${type}`,user)\n        .then( token => {\n            if(type === 'login')\n            {\n            localStorage.setItem(\"usersToken\", token.data.accessToken)\n            dispatch(setUserToken(token.data.accessToken))\n            }\n        })\n        .catch( err => {\n            if(err.response.status === 400)\n            {\n                dispatch(setUserErrors(err.response.data))\n                console.log(\"error occured : \",err.response.data,err.response.status)\n            }\n        })\n    }\n}\nconst retrieveUserToken = () => {\n    \n    return(dispatch, getState) => {\n        const token = getState().userTokener.userToken\n        console.log(\"retrive user token : \",token)\n        if(token){\n            dispatch(setUserRetrieveToken(token))\n        } \n    }\n}\nconst viewProfile = (userId) => {\n    return(dispatch) => {\n        axios.get(`http://localhost:3040/users/my-profile/${userId}`)\n        .then((user) => {\n            dispatch(setProfile(user.data.user))\n        })\n        .catch( err => console.log(err) )\n    }\n}\nconst updateProfile = (userDetails,userId) => {\n    console.log(\"user details : \",userDetails)\n    console.log(\"id : \",userId)\n    return (dispatch) => {\n        axios.put(`http://localhost:3040/users/${userId}`,userDetails)\n        .then(() => { \n            dispatch(setProfile(userDetails))\n        })\n        .catch( err => console.log(\"error : \",err))\n    }\n}\n\nexport {\n    storeUserToken,\n    retrieveUserToken,\n    deleteUserToken,\n    viewProfile,\n    updateProfile\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}