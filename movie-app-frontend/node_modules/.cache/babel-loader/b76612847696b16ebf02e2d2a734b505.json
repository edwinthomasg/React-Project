{"ast":null,"code":"import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_LOGIN_ERROR, SE, SET_SIGN_UP, SET_USER_REFRESH } from \"./ActionTypes\";\nimport axios from \"axios\";\nimport { UserBase } from \"../api/BaseUrl\";\nimport { axiosUserInstance } from \"../api/Interceptors\";\n\nconst setUserToken = token => {\n  return {\n    type: SET_USER_TOKEN,\n    token\n  };\n};\n\nconst setUserRetrieveToken = token => {\n  return {\n    type: SET_USER_RETRIEVE_TOKEN,\n    token\n  };\n};\n\nconst deleteUserToken = () => {\n  return {\n    type: DELETE_USER_TOKEN\n  };\n};\n\nconst setProfile = user => {\n  return {\n    type: SET_PROFILE,\n    payload: user\n  };\n};\n\nconst refreshProfile = () => {\n  return {\n    type: SET_USER_REFRESH\n  };\n};\n\nconst setLoginError = error => {\n  return {\n    type: SET_LOGIN_ERROR,\n    payload: error\n  };\n};\n\nconst setSignUpError = error => {\n  return {\n    type: SET_SIGNUP_ERROR,\n    payload: error\n  };\n};\n\nconst setSignUp = () => {\n  return {\n    type: SET_SIGN_UP\n  };\n};\n\nconst storeUserToken = user => {\n  return dispatch => {\n    axios.post(`${UserBase}/login`, user).then(token => {\n      sessionStorage.setItem(\"usersToken\", token.data.accessToken);\n      dispatch(setUserToken(token.data.accessToken));\n    }).catch(err => {\n      if (err.response.status === 400) {\n        console.log(\"message received from backend : \", err.response.data.errorMessage);\n        dispatch(setLoginError(err.response.data.errorMessage));\n      }\n    });\n  };\n};\n\nconst signUpUser = async user => {\n  return dispatch => {\n    axios.post(`${UserBase}/signup`, user).then(() => {\n      console.log(\"success signed up\");\n    }).catch(err => {\n      console.log(\"error occured in signup : \", err.response.data.errorMessage);\n      dispatch;\n    });\n  };\n};\n\nconst retrieveUserToken = () => {\n  return (dispatch, getState) => {\n    const token = getState().user.userToken;\n\n    if (token) {\n      dispatch(setUserRetrieveToken(token));\n    }\n  };\n};\n\nconst viewProfile = userId => {\n  return dispatch => {\n    axiosUserInstance({\n      url: `users/my-profile/${userId}`,\n      method: \"get\"\n    }).then(user => {\n      dispatch(setProfile(user.data.user));\n    }).catch(err => console.log(err));\n  };\n};\n\nconst updateProfile = (userDetails, userId) => {\n  return dispatch => {\n    axiosUserInstance({\n      url: `users/${userId}`,\n      method: \"put\",\n      data: userDetails\n    }).then(() => {\n      dispatch(setProfile(userDetails));\n    }).catch(err => console.log(\"error : \", err));\n  };\n};\n\nexport { storeUserToken, retrieveUserToken, deleteUserToken, viewProfile, updateProfile, signUpUser };","map":{"version":3,"names":["SET_USER_TOKEN","SET_USER_RETRIEVE_TOKEN","DELETE_USER_TOKEN","SET_PROFILE","SET_LOGIN_ERROR","SE","SET_SIGN_UP","SET_USER_REFRESH","axios","UserBase","axiosUserInstance","setUserToken","token","type","setUserRetrieveToken","deleteUserToken","setProfile","user","payload","refreshProfile","setLoginError","error","setSignUpError","SET_SIGNUP_ERROR","setSignUp","storeUserToken","dispatch","post","then","sessionStorage","setItem","data","accessToken","catch","err","response","status","console","log","errorMessage","signUpUser","retrieveUserToken","getState","userToken","viewProfile","userId","url","method","updateProfile","userDetails"],"sources":["/home/asplap2005/Documents/React-Project/movie-app-frontend/src/components/redux/UserActions.js"],"sourcesContent":["import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_LOGIN_ERROR, SE ,SET_SIGN_UP, SET_USER_REFRESH } from \"./ActionTypes\"\nimport axios from \"axios\"\nimport { UserBase } from \"../api/BaseUrl\"\nimport { axiosUserInstance } from \"../api/Interceptors\"\n\nconst setUserToken = (token) => {\n    return {\n        type : SET_USER_TOKEN,\n        token\n    }\n}\nconst setUserRetrieveToken = (token) => {\n    return {\n        type : SET_USER_RETRIEVE_TOKEN,\n        token\n    }\n}\nconst deleteUserToken = () => {\n    return {\n        type : DELETE_USER_TOKEN\n    }\n}\nconst setProfile = (user) => {\n    return {\n        type : SET_PROFILE,\n        payload : user\n    }\n}\nconst refreshProfile = () => {\n    return {\n        type : SET_USER_REFRESH\n    }\n}\nconst setLoginError = (error) => {\n    return {\n        type : SET_LOGIN_ERROR,\n        payload : error\n    }\n}\nconst setSignUpError = (error) => {\n    return {\n        type : SET_SIGNUP_ERROR,\n        payload : error\n    }\n}\nconst setSignUp = () => {\n    return {\n        type : SET_SIGN_UP\n    }\n}\nconst storeUserToken = (user) => {\n    return (dispatch) => {\n        axios.post(`${UserBase}/login`,user)\n        .then( token => {\n            sessionStorage.setItem(\"usersToken\", token.data.accessToken)\n            dispatch(setUserToken(token.data.accessToken))\n        })\n        .catch( err => {\n            if(err.response.status === 400)\n            {\n                console.log(\"message received from backend : \",err.response.data.errorMessage)\n                dispatch(setLoginError(err.response.data.errorMessage))\n            }\n        })\n    }\n}\nconst signUpUser = async(user) => {\n    return(dispatch) => {\n        axios.post(`${UserBase}/signup`,user)\n        .then(() => {\n        console.log(\"success signed up\")\n        })\n        .catch( err => {\n        console.log(\"error occured in signup : \",err.response.data.errorMessage)\n        dispatch\n         })\n    }\n}\nconst retrieveUserToken = () => {\n    return(dispatch, getState) => {\n        const token = getState().user.userToken\n        if(token){\n            dispatch(setUserRetrieveToken(token))\n        } \n    }\n}\nconst viewProfile = (userId) => {\n    return(dispatch) => {\n        axiosUserInstance({\n            url: `users/my-profile/${userId}`,\n            method: \"get\"\n        })\n        .then((user) => {\n            dispatch(setProfile(user.data.user))\n        })\n        .catch( err => console.log(err) )\n    }\n}\nconst updateProfile = (userDetails,userId) => {\n    return (dispatch) => {\n        axiosUserInstance({\n            url: `users/${userId}`,\n            method: \"put\",\n            data : userDetails\n        })\n        .then(() => { \n            dispatch(setProfile(userDetails))\n        })\n        .catch( err => console.log(\"error : \",err))\n    }\n}\n\nexport {\n    storeUserToken,\n    retrieveUserToken,\n    deleteUserToken,\n    viewProfile,\n    updateProfile,\n    signUpUser\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}