{"ast":null,"code":"import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_AUTH_ERROR, SET_SIGN_UP } from \"./ActionTypes\";\nimport axios from \"axios\";\nimport { UserBase } from \"../api/BaseUrl\";\nimport axiosInstance from \"../api/Interceptors\";\n\nconst setUserToken = token => {\n  return {\n    type: SET_USER_TOKEN,\n    token\n  };\n};\n\nconst setUserRetrieveToken = token => {\n  return {\n    type: SET_USER_RETRIEVE_TOKEN,\n    token\n  };\n};\n\nconst deleteUserToken = () => {\n  return {\n    type: DELETE_USER_TOKEN\n  };\n};\n\nconst setProfile = user => {\n  return {\n    type: SET_PROFILE,\n    payload: user\n  };\n};\n\nconst setAuthError = error => {\n  return {\n    type: SET_AUTH_ERROR,\n    payload: error\n  };\n};\n\nconst setSignUp = () => {\n  return {\n    type: SET_SIGN_UP\n  };\n};\n\nconst storeUserToken = function (user) {\n  let type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'login';\n  console.log(\"entering actions...\");\n  return dispatch => {\n    axios.post(`${UserBase}/${type}`, user).then(token => {\n      if (type === 'login') {\n        console.log(\"login action ..\");\n        sessionStorage.setItem(\"usersToken\", token.data.accessToken);\n        dispatch(setUserToken(token.data.accessToken));\n        console.log(\"stored login success message in state\");\n      } else {\n        console.log(\"signup action ..\");\n        dispatch(setSignUp());\n        console.log(\"stored signup success message in state\");\n      }\n    }).catch(err => {\n      if (err.response.status === 400) {\n        console.log(\"message received from backend : \", err.response.data.errorMessage);\n        dispatch(setAuthError(err.response.data.errorMessage));\n        console.log(\"stored error in state using dispatch\");\n      }\n    });\n  };\n};\n\nconst retrieveUserToken = () => {\n  return (dispatch, getState) => {\n    const token = getState().userTokener.userToken;\n\n    if (token) {\n      dispatch(setUserRetrieveToken(token));\n    }\n  };\n};\n\nconst viewProfile = userId => {\n  return dispatch => {\n    axiosInstance({\n      url: `users/my-profile/${userId}`,\n      method: \"get\"\n    }).then(user => {\n      dispatch(setProfile(user.data.user));\n    }).catch(err => console.log(err));\n  };\n};\n\nconst updateProfile = (userDetails, userId) => {\n  return dispatch => {\n    axiosInstance({\n      url: `users/${userId}`,\n      method: \"get\"\n    });\n    axios.put(`${UserBase}/${userId}`, userDetails).then(() => {\n      dispatch(setProfile(userDetails));\n    }).catch(err => console.log(\"error : \", err));\n  };\n};\n\nexport { storeUserToken, retrieveUserToken, deleteUserToken, viewProfile, updateProfile };","map":{"version":3,"names":["SET_USER_TOKEN","SET_USER_RETRIEVE_TOKEN","DELETE_USER_TOKEN","SET_PROFILE","SET_AUTH_ERROR","SET_SIGN_UP","axios","UserBase","axiosInstance","setUserToken","token","type","setUserRetrieveToken","deleteUserToken","setProfile","user","payload","setAuthError","error","setSignUp","storeUserToken","console","log","dispatch","post","then","sessionStorage","setItem","data","accessToken","catch","err","response","status","errorMessage","retrieveUserToken","getState","userTokener","userToken","viewProfile","userId","url","method","updateProfile","userDetails","put"],"sources":["/home/asplap2005/Documents/React-Project/movie-app-frontend/src/components/redux/UserActions.js"],"sourcesContent":["import { SET_USER_TOKEN, SET_USER_RETRIEVE_TOKEN, DELETE_USER_TOKEN, SET_PROFILE, SET_AUTH_ERROR, SET_SIGN_UP } from \"./ActionTypes\"\nimport axios from \"axios\"\nimport { UserBase } from \"../api/BaseUrl\"\nimport axiosInstance from \"../api/Interceptors\"\n\nconst setUserToken = (token) => {\n    return {\n        type : SET_USER_TOKEN,\n        token\n    }\n}\nconst setUserRetrieveToken = (token) => {\n    return {\n        type : SET_USER_RETRIEVE_TOKEN,\n        token\n    }\n}\nconst deleteUserToken = () => {\n    return {\n        type : DELETE_USER_TOKEN\n    }\n}\nconst setProfile = (user) => {\n    return {\n        type : SET_PROFILE,\n        payload : user\n    }\n}\nconst setAuthError = (error) => {\n    return {\n        type : SET_AUTH_ERROR,\n        payload : error\n    }\n}\nconst setSignUp = () => {\n    return {\n        type : SET_SIGN_UP\n    }\n}\nconst storeUserToken = (user, type = 'login') => {\n    console.log(\"entering actions...\")\n    return (dispatch) => {\n        axios.post(`${UserBase}/${type}`,user)\n        .then( token => {\n            if(type === 'login')\n            {\n            console.log(\"login action ..\")\n            sessionStorage.setItem(\"usersToken\", token.data.accessToken)\n            dispatch(setUserToken(token.data.accessToken))\n            console.log(\"stored login success message in state\")\n            }\n            else\n            {\n                console.log(\"signup action ..\")\n                dispatch(setSignUp())\n                console.log(\"stored signup success message in state\")\n\n            }\n        })\n        .catch( err => {\n            if(err.response.status === 400)\n            {\n                console.log(\"message received from backend : \",err.response.data.errorMessage)\n                dispatch(setAuthError(err.response.data.errorMessage))\n                console.log(\"stored error in state using dispatch\")\n            }\n        })\n    }\n}\nconst retrieveUserToken = () => {\n    \n    return(dispatch, getState) => {\n        const token = getState().userTokener.userToken\n        if(token){\n            dispatch(setUserRetrieveToken(token))\n        } \n    }\n}\nconst viewProfile = (userId) => {\n    return(dispatch) => {\n        axiosInstance({\n            url: `users/my-profile/${userId}`,\n            method: \"get\"\n        })\n        .then((user) => {\n            dispatch(setProfile(user.data.user))\n        })\n        .catch( err => console.log(err) )\n    }\n}\nconst updateProfile = (userDetails,userId) => {\n    return (dispatch) => {\n        axiosInstance({\n            url: `users/${userId}`,\n            method: \"get\"\n        })\n        axios.put(`${UserBase}/${userId}`,userDetails)\n        .then(() => { \n            dispatch(setProfile(userDetails))\n        })\n        .catch( err => console.log(\"error : \",err))\n    }\n}\n\nexport {\n    storeUserToken,\n    retrieveUserToken,\n    deleteUserToken,\n    viewProfile,\n    updateProfile\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}